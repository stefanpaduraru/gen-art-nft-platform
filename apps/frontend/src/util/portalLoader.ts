const portalLoaderScript = `class Random{constructor(t){this.seed=t}dec(){return this.seed^=this.seed<<13,this.seed^=this.seed>>17,this.seed^=this.seed<<5,(this.seed<0?1+~this.seed:this.seed)%1e3/1e3}num(t,e){return t+(e-t)*this.dec()}int(t,e){return Math.floor(this.num(t,e+1))}}const PALETTE_NAMES=["Childhood","Neon","Hot","Arctic","Bold","Cappuccino","Even","Frida","Tropical","Mint"],palettes=[["#2C3E50","#FC4349","#D7DADB","#6DBCDB","#FFFFFF","#ABC8E2","#E1E6FA"],["#52656B","#FF3B77","#CDFF00","#FFFFFF","#B8B89F","#DAEAEF","#272F32"],["#FF0005","#FFF28C","#959595","#3D3D3D","#121212","#FFEB4D","#BEC7C7"],["#D5FBFF","#9FBCBF","#647678","#2F3738","#59D8E6","#1B1D26","#E8F8FF"],["#0C273D","#54D0ED","#FFFEF1","#70B85D","#2C5E2E","#FFF8D3","#0E3D59"],["#FFE2C5","#FFEEDD","#FFDDAA","#FFC484","#FFDD99","#D94436","#ED9355"],["#003840","#007369","#02A676","#FFFFE4","#B9BF8E","#A69F7C","#8C6865"],["#D93280","#304018","#BCBF56","#F2C53D","#F24130","#85B5D9","#EDEFE4"],["#fe745f","#ff924e","#ffb752","#7fac46","#457928","#4ec9ff","#B5F9FF"],["#8FBFE1","#34590E","#5F8C1B","#8FBF26","#C1D96A","#F2F2F2","#ffffff"]];class Swirl{resizeFactor;blockWidth;blockHheight;offset;multiColor;defaultColor;border;fillMode;fillStep;paletteId;multiColor;borderWidth;borderColor;radius;elementWidth;elementHeight;elementCount;columns;frame;constructor(t,e,i,n,o,s,r,a,l,d,h,c,F,u,f,C,m,R=15,p=0){this.frame=0,this.resizeFactor=t,this.canvasWidth=e,this.canvasHeight=i,this.aspectRatio=n,this.backgroundColor=o,this.paletteId=s,this.fillMode=r,this.fillStep=a,this.multiColor=l,this.borderWidth=d,this.borderColor=h,this.radius=c,this.offset=F,this.elementWidth=u,this.elementHeight=f,this.elementCount=C,this.columns=m,this.oddColumnIndex=R,this.oddColumnColorIndex=p}setup=function(){canvas=createCanvas(this.canvasWidth,this.canvasHeight),noStroke(),angleMode(DEGREES)};drawGradient=()=>{background("#00000000")};drawSwirl(t,e=2,i=5,n=0,o=!0,s=0,r="ff",a=!0,l=0,d=15,h=0){push();let c="";o||(c=this.getRandomPaletteColor(l));for(let s=1;s<this.columns;s++){let r;o&&(c=this.getRandomPaletteColor(l)),r=s===d?this.getPaletteColorByIndex(l,h):c,a?fill(r+"e0"):noFill();let F=t*cos(s+n)*this.resizeFactor,u=t*sin(s+n)*this.resizeFactor;const f=e*this.resizeFactor,C=i*this.resizeFactor;rotate(4*PI),s>=15?(push(),F+=s/75*this.resizeFactor,u+=s/75*this.resizeFactor,noStroke(),ellipse(F+f/2,u+C/2,f,C),rotate(2*s*this.resizeFactor),pop()):(noStroke(),ellipse(F+f/2,u+C/2,f,C)),noStroke()}pop()}draw=function(){clear(),this.drawGradient();const t=Math.min(elementCount);0===this.frame&&loop(),translate(this.canvasWidth/2,this.canvasHeight/2),push(),rotate(this.frame%360);for(let e=0;e<=t;e++){const t=this.radius/10+e*this.radius/10,i=e/this.elementWidth,n=e/this.elementHeight,o=e/this.offset;let s=!!this.fillMode,r=this.borderWidth;1===this.fillMode&&(s=e%this.fillStep==0);let a="ff";r&&(this.columns>29||this.borderWidth>=2)&&(a=90),r&&140===this.columns&&(a=borderWidth>=1.5?35:90),this.drawSwirl(t,i,n,o,this.multiColor,r,a,s,this.paletteId,this.oddColumnIndex,this.oddColumnColorIndex)}pop(),this.frame=this.frame+1};getRandomPaletteColor(t=0){const e=getRandomInt(0,palettes.length-1),i=getRandomInt(0,6);return t>=0?palettes[t][i]:palettes[e][i]}getPaletteColorByIndex(t=0,e=0){if(t>=0)return palettes[t][e]}}function getRandomInt(t,e){return Rand.int(t,e)}disableFriendlyErrors=!0;const aspectRatio=1,defaultSize=875,defaultSizeHeight=875,seed=parseInt(tokenData.hash.slice(50,66),16);let Rand=new Random(seed);const paletteId=Rand.int(0,palettes.length-1),backgroundColor=getBackgroundColor(paletteId),fillMode=Rand.int(1,2),fillStep=Rand.int(5,20),multiColor=!!Rand.int(0,1);let border=!(fillMode&&!Rand.int(0,1)),borderWidth=border?Rand.int(2,15)/10:0,borderColor=null;fillMode?(borderColor=Rand.int(0,1)?"#00000060":null,1===fillMode&&(border=!0,borderColor=null,borderWidth=Rand.int(2,15)/10)):(borderColor=null,borderWidth=Rand.int(2,15)/10);const radiusFactor=Rand.int(5,50),radius=875/radiusFactor,offset=Rand.int(10,40),elementWidth=Rand.int(10,40)/10,elementHeight=Rand.int(10,40)/10,elementCount=Rand.int(50,200);let columns=28;const oddColumnIndex=Rand.int(1,28),oddColumnColorIndex=Rand.int(0,6);let swirl;function setup(){const{canvasWidth:t,canvasHeight:e,aspectRatio:i,resizeFactor:n}=getDrawingDimensions();swirl=new Swirl(n,t,e,i,backgroundColor,paletteId,fillMode,fillStep,multiColor,borderWidth,borderColor,radius,offset,elementWidth,elementHeight,elementCount,columns,oddColumnIndex,oddColumnColorIndex),swirl.setup()}function draw(t=!1){const{dimension:e,canvasWidth:i,canvasHeight:n,aspectRatio:o,resizeFactor:s}=getDrawingDimensions(),r=parseInt(tokenData.hash.slice(50,66),16);Rand=new Random(r);getBackgroundColor(Rand.int(0,palettes.length-1));const a=Rand.int(1,2);Rand.int(5,20),Rand.int(0,1);let l=!(a&&!Rand.int(0,1)),d=l?Rand.int(2,15)/10:0,h=null;a?(h=Rand.int(0,1)?"#00000060":null,1===a&&(l=!0,h=null,d=Rand.int(2,15)/10)):(h=null,d=Rand.int(2,15)/10);const c=Rand.int(5,50);Rand.int(10,40),Rand.int(10,40),Rand.int(10,40),Rand.int(50,200);Rand.int(1,28),Rand.int(0,6);swirl.resizeFactor=s,swirl.radiusFactor=e*s/c,swirl.canvasWidth=i,swirl.canvasHeight=n,t&&(swirl.frame=0),swirl.draw()}function getDrawingDimensions(){const t=window.innerWidth,e=window.innerHeight;let i=t,n=e;1*e<t?i=1*e:n=t/1;const o=i/875;return{dimension:Math.min(i,n),aspectRatio:1,resizeFactor:o,canvasWidth:i,canvasHeight:n}}function getBackgroundColor(t){return palettes[t][Rand.int(0,palettes[t].length-1)]}`;

export default portalLoaderScript;
